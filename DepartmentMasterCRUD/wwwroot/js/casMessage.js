var ___fastSelectControlId = '';
var __noClick = false;
var __IsConfirmlink = true;
var ___fastSelectDeletedElement = '';

var messageRecordFound = 'No Record Found';
//console.log('%c', devtools);
var _approve = 393
    , _reject = 394
    , _close = 395
    , _Pending = 386
    , _Rejected = 387
    , _Approved = 388
    , _PartiallyApproved = 389
    , _Cancelled = 421
    , _FromDateGreater = 382
    , _TakingMoreThenAllocated = 383
    , _placeHolderFromDate = 384
    , _placeHolderToDate = 385
    , _Designation = 378
    , _DepartmentLabel = 429
    , _StartDate = 379
    , _EndDate = 380
    , _Employee = 381
    , _Action = 71
    , _UpdateAll = 422
    , _RequiredTwoDigit = 377
    , _TotalTimeLessHours = 423
    , _ValidHighlightedField = 424
    , NonSelectedFile = 441;

var RcrdNotAvailable = 320;
var IsEdit = true;
var IsDelete = true;
var LeaveMsg = 265;
var UpdateMsg = 263;
var CancelLeave = 253;
var ModifyRecord = 292;
var PendingRequset = 293;
var RequestHistory = 294;
var ModificationRequest = 295;
var LeaveAllowedMsg = 307;
var ViewLeaves = 296
var DepartmentLeave = 297
var HolidayCalendar = 298
var LeaveStatusMsg = 299;
var LeaveBalance = 300;
var LeaveSelfCalendar = 301;
var LeaveAssignNoFound = 302;
var LeaveAllocationNoFound = 303;
var UploadDesignation = 269;
var SetFinancialYear = 270;
var AssignLeaveType = 271;
var CommentValidation = 290;
var SuccessMessageId = 1;
var ErrorRequiredId = 2;
var RecordExists = 4;
var ErrorInValidEmail = 5;
var ErrorPanCard = 7;
var ErrorIfsc = 8;
var ErrorUrl = 9;
var PageConfirmation = 11;
var DeleteConfirmation = 12;
var FromDateVlidation = 16;
var CloseOpenDate = 13;
var StartEndDate = 14;
var StartActualDate = 22;
var FromDueDate = 15;
var ChildRecordAssosiate = 19;
var StartDueDate = 21;
var RecordWithSameTabExists = 17;
var EmployeeOnBoarding = 20;
var MaximumMarks = 23;
var PendingRMsg = 273;
var PassingMark = 24;
var MaximumMarksEmpty = 25;
var PassingMarksGreater = 27;
var InOutTimeSame = 28;
var OutTmeLessInTime = 29;
var NoOfLeavesZero = 30;
var NoOfLeavesGreater = 31;
var InsufficienBalance = 32;
var ScoringMark = 33;
var OneEntry = 34;
var DepriciationPeriodError = 35;
var DepriciationPeriodError1 = 36;
var DepriciationPeriodError2 = 37;
var DepriciationPeriodError3 = 38;
var DepriciationPeriodError4 = 39;
var ValidUntilValidation = 26;
var CodeValueError = 40;
var CodeError = 41;
var ErrorLoanApp = 42;
var ErrorEmitAmmount = 43;
var ErrorAmmountCanGrater = 44;
var ErrorPaymentStart = 45;
var ErrorEmployeeName = 46;
var ErrorPaymentDone = 47;
var ErrorSelectType = 48;
var ErrorChoseDate = 49;
var ErrorToDate = 50;
var ErrorDateCantLess = 51;
var ErrorRecordNotFound = 52;
var MinMaxAmtError = 53;
var ErrorSelectDropdown = 54;
var PercentageError = 55;
var SellAssetdate = 56;
var ScrapAssetdate = 57;
var ActvateAsset = 59;
var DeactivateAsset = 60;
var CustomerBOE = 61;
var ReverseAsset = 62;
var CancelledError = 63;
var SupplierInterestEmailSent = 64;
var SupplierInterestEmailFail = 65;
var ReceivedError = 66;
var VoucherEntryError = 67;
var DuplicateEntries = 68;
var MsgAction = 71;
var ConfirmHeading = 72;
var ConfirmYes = 73;
var ConfirmNo = 74;
var AcknowledgedError = 75;
var SelectFile = 78;
var SelectFileNF = 79;
var DOBGreater = 82;
var CTCNotMore = 83;
var ScheduleIRTime = 84;
var IRscheduleTitle = 85;
var IRJobSeekerTitle = 86;
var OfferedCTC = 87;
var QcShiftnotSame = 101;
var TimeGreaterOrSame = 105;
var QtyChecked = 106;
var Temperature = 88;
var MsgAmount = 89;
var ManualSupplierError = 58;
var TimeError = 93;
var PrePeriodError = 94;
var AllowDateAfterEightDays = 96;
var AccountingPeriodError1 = 91;
var CrushMachineNumber = 100;
var RemoveQtyLess = 102;
var QtyCrushedLess = 103;
var SampleQtyLess = 104;
var PleaseAttachFile = 111;
var LoanAndAdvanceEntry = 112;
var UnReadMessageCount = 115;
var CustomerInvoice = 116;
var date = 117;
var VoucherAccountError = 119;
var AmountPaid = 121;
var ChequeCash = 122;
var CancelCheque = 123;
var ChequeCashCancel = 124;
var MatchInvoiceNotGenerated = 129;

var AreaCovered = 440;
var WasteJuice = 444;
var _avatharDefaultUrl = '';
var _companyDefaultUrl = '';
var JuiceWeight = 443;
var ActualShipDate = 184;
var FollowUpDate = 183;
var StandardQuantity = 109;
var RQshouldnotGreater = 182;
var RQty = 181;
var RemainingQty = 180;
var WastedQty = 179;
var MaterialQuantity = 178;
var SelectWorkOrder = 177;
var LatestOrderDatee = 172;
var PlannedReceiptDate = 171;
var SelectedLogo = 169;
var FromInventory = 168;
var RequestDateGreater = 167;
var RequestDate = 166;
var DueDateGreater = 165;
var AccumulatedPer = 164;
var MaxOrderAmt = 163;
var ValidFrom = 16;
var QuantityReceived = 160;
var EndTime = 157;

var notEqualTime = 158;
var FogDate = 156;
var StartDateEnd = 14;
var SupplierCheque = 135;
var SelectRecord = 137;
var SmethingWentWrong = 138;
var MigratedAsset = 139;
var VoucherExists = 140;
var VoucherNotExists = 141;
var Amount = 142;
var VoucherNotApproved = 143;
var SupplierPO = 144;
var onlyapprovedpayment = 145;
var sellamtaquisition = 146;
var MinimumYear = 147;
var MaximumYear = 148;
var MinimumAmount = 149;
var MaximumAmount = 150;
var DepreciationCalendarError = 151;
var QuantityGreater = 173;
var ActualDate = 175;
var PlannedDate = 176;
var DueAndPaymentDate = 155;
var SwiftCode = 159;
var NoRecordFound = 161;
var ToNumber = 170;
var NextNumber = 174;
var StartTimeEndTime = 186;
var FromDateLessThanToday = 191;
var FromDateAndToDateLess = 193;
var InterviewEndTimeGreater = 195;
var VacancyCloseDateGrater = 196;
var ScheduleMaintainErrorDate = 194;
var PreviousYearError = 187;
var AlphabetError = 190;
var PeriodMonthError = 192;
var AdvanceInvoiceError = 197;
var SupplierInvoiceError = 198;
var QuantityGrindedCheckLess = 188;
var QuantityRecievedCheck = 189;
var StartTimee = 185;
var WorkOrderNTExist = 442;
var SelfRatingLessOrEqual = 199;
var RatingbyAppraiserLessOrEqual = 200;
var TravelPlan = 204;
var TravelDateGTDate = 205;
var TravelDateGTSDate = 206;
var InvoiceAmountMsg = 207;
var FileValidation = 208;
var GreaterDate = 223;
var paymentDateError = 209;
var ToQuantityShouldBeGreater = 216;
var ReturnQuantityError = 215;
var InStockEqualOrderQuantity = 217;
var WorkFlowQuantity = 220;
var ResourceQuantity = 221;
var IssuedResource = 225;
var DepreciationCalenderYearMsg = 222;
var ZeroAmountValidation = 224;
var UploadFile = 226;
var DeductionAmount = 228;
var LimitOverdue = 229;
var SalaryError = 230;
var SalaryFeed = 231;
var PaySlipNotGenerated = 232;
var SalaryProcess = 234;
var AccountNumberError = 238;
var CashAccount = 240;
var YearError = 241;
var OverTimeHour = 242;
var OverTimeStatus = 243;
var SelectInvoice = 244;
var CustomerOrderPOS = 245;
var MobileNumber = 246;
var AccountingCalender = 249;
var EndValueError = 254;
var CostAmount = 260;
var PercentageSalary = 261;
var TimeDiff = 278;
var RecordNotFound = 264;
var Grace = 266;
var NumberOfFile = 267;
var FileName = 272;
var FileSize = 274;
var EffectiveDate = 275;
var EmployeeDocUpload = 285;
var KRAWeightCanNotLess = 286;
var SalaryComponent = 304;
var GDate = 305;
var DuplicateEmail = 316;
var RegisterTraining = 318;

var StartDateLessEndDate = 250;
var ToTimeMessage = 342;
var StartTimes = 341;
var EmployeeExitFile = 371;

var GraceOutss = 319;
var TraineeRegistrationMessage = 322;
var NoRecordExport = 376;

var NoOfferLetterSendYet = "No offer letter send yet !!";
var NoSalaryStructure = "No data found for the search !!";
var NoEmpSalaryStructure = "No data found for the search !!";
var NoDataAvailableFortheMonth = "No data available for the selected month and year !!";

var requestMessage = "No resource request till date !!";
var vacanyMessage = "No vacancy created yet !!";
var VacancyandApplicantsMessage = "No applicants found for vacancies.";
var EmployeeDeclerationError = "Declaration value should be less than 500000 for one child and 1000000 for others";
var CheckDuplicateEmployeeCode = "Employee ID already exists";
//var SalaryComponentMsg = "This variable already taken";


//=======================neha================//
var EmployeeLeavesBalanceYTD = "Employee Leave Balance data is not available !!",
    AnnounceAndNotice = "You are the first to send announcement here !!";
//=======================end=================//


//================ NIk =========================
var EmployeeCodeMap = 'Mapping is not done for employees !!';
var EmployeeProfilee = 'Data is not updated !!';
var AttendenceAdjustment = 'Attendance is not entered for this date range !! Please try other dates !!';
var EmployeeAttendancee = 'Attendance is not entered for this date range !! Please try other dates !!';
//var ManualDailyAttendence = 'Attendance is already uploaded for selected date !!';
var ManualDailyAttendence = 'Attendance is already uploaded for selected date OR Selected date is lesser than Employee Joining Date !!';

var EmployeePendingApproval = 'No pending approvals for now !!';
var AttendenceforPayroll = 'Attendance not entered for the selected month year or employee !!';
var DailyAttendence = 'Attendance is not entered for this date range and Department or Employee !! Please try other dates or department !!';
var DirectWalkin = 'This Applicant Already Applied For This Vacancy';

var NRCNumbermsg = "This NCR Number Already blocked by Company";
//=============== End =========================

var AppraisalTitleMessage = "No Appraisal title created for this FY.";
var SetPerformanceMessage = "Participants are not mapped for this Financial Year";
var SalarySlipStructureMessage = "Salary structure is not defined yet. Please define it and try again !!";
var ScheduleInterview = 'There are no applications to schedule interview .';
var PayrollPreviewMessage = 'Attendance is not available for selected Month';

var NewJoiningMessage = 'Selected date is lesser than Employee Joining Date !!';
var MessageSave = "Trainee Approved";



var MenuProfileID = 1;
var MenuDashboardID = 8955;

var __clearTimer = 0;
var __listShow = 0, _listHide = 0;
var _myVar;
$(window).load(function () {
    Message.GetDefaultMessage();
    /// Message.SetFullScreenOnPage();a:not(.bedCrumb)
    setInterval(function () {
        $('.textReadOnly').attr('tabindex', '-1');

        //fnBeforeSend(0);
    }, 1000);


    //CheckLoading();  

});
function CheckLoading() {
    _myVar = setInterval(function () {
        var intLoading = $('.loadingoverlay').length;
        if (intLoading == 1 || __clearTimer == 0) {
            //$('body').addClass('loaded');
            clearTimeout(_myVar);
        }
    }, 0);
}
$(function () {


    LoadClickedDetail();
    Message.BindHelpText();
    //BedCrumb();
});

function fnBeforeSend(pageNo) {
    __listShow = 1;
    if ($('body').hasClass('loaded')) {
        __listShow = 0;
        $.LoadingOverlay("show");
    }

}

var IsExecute = true;
window.onbeforeunload = function (event) {
    var idd = $(event.target.activeElement).attr('id');
    if (idd == 'aSave') {
        $('#aSave').attr("class", "disableAtag");
    }
};

//window.onbeforeunload = function () {
//    var inputs = document.getElementsByTagName("INPUT");
//    for (var i in inputs) {
//        if (inputs[i].type == "button" || inputs[i].type == "submit") {
//            inputs[i].disabled = true;
//        }
//    }


//};

//$('#adownLoad1').click(function () {
//    $(this)[0].disabled = true;

//    console.log('a');
//})



$(document).on('click', 'ul[role="tablist"] li', function () {
    $('ul[role="tablist"] li:not(.active)').removeAttr('style');
    $('ul[role="tablist"] li.active').attr('style', 'pointer-events:none')

});

function clickStopper(e) {

    //alert("click was blocked"); // ** you can remove this line **
    e.preventDefault(); // equivalent to 'return false'
    //e.target.removeEventListener(e.type, arguments.callee);
}


//$(document).on('click', 'input[type=button],input[type=submit],button,a', function () {
//    //alert('hi');

//});


//$(document).on('click', '#aSave', function () {
//    alert('hi');
//});
$(document).on('dblclick', '#aSave', (function (e) {
    return e.preventDefault();
}));
//$('#aSave').dblclick(function (e) {
//    return e.preventDefault();    
//})
$(document).on('click', 'input[type=button],input[type=submit],button,a:not(.bedCrumb)', function (e) {
    if (!$(this).hasClass('Noclick')) {
        newTabLink(e);
    }
});

$(document).on('click', 'a.bedCrumb', function (e) {
    if (!$(this).hasClass('Noclick')) {
        newTabLink(e);
    }
});


//$(document).on('click', '#MainUl .submenu .parentMenu', function () {
//    var abc = $(this).find('span').text();
//    alert(abc);
//});

$(document).on('keyup keypress keydown', '.timepicki-input', function () {
    return false;
});

//$(document).on('click', 'a.parentMenu', function () {
//    newTabLink();
//})


$(document).ready(function () {
    $('#MainUl .submenu .parentMenu').click(function () {
        //  alert('hi');
        var len = $('#MainUl .submenu').find('li.open').length;
        if (~~len > 1) {
            $('#MainUl .submenu').find('li.open>ul').css("display", "none");
            $('#MainUl .submenu').find('li.open').removeClass('open');
        }

        // $('#MainUl li').css("display", "block"); 
    });

});


var devtools = /./;
devtools.toString = function () {
    this.opened = true;
}


var errorMessage = function (errorId) {

    if (typeof (errorId) === 'undefined') errorId = 2;

    var message = 'error';
    Message.GetDefaultMessage();
    var messageDetail = localStorage.getItem('MessageDetail');
    messageDetail = JSON.parse(messageDetail);
    var mesge = $.grep(messageDetail, function (details) {
        return details.ErrorId == errorId;
    });
    if (mesge.length > 0) {
        message = mesge[0].ErrorMessage;
    }
    ShowErroMessage(message);
    return message;
};


var getMessage = function (messageId) {

    Message.GetDefaultMessage();
    var messageDetail = localStorage.getItem('MessageDetail');
    messageDetail = JSON.parse(messageDetail);
    var mesge = $.grep(messageDetail, function (details) {
        return details.ErrorId == messageId;
    });
    if (mesge.length > 0) {
        message = mesge[0].ErrorMessage;
    }
    return message;
};
var ShowErroMessage = function (messageText) {
    $$divSucess.attr('style', 'display:none');
    $$divSuccessMessage.attr('style', 'display:none');
    $$divError.removeAttr('style');
    $$strongMessage.text(messageText);
    return false;
};


var ShowSuccessMessage = function (messageId) {
    $$divSucess.attr('style', 'display:none');
    $$divError.attr('style', 'display:none');
    $$divSuccessMessage.removeAttr('style');
    var messageText = getMessage(messageId);
    $$spanSuccessMessage.text(messageText);
    __IsConfirmlink = false;
    MessageFadeOut(2000);
    return false;
};


var SucesssMessage = function (messageText) {
    $$divSucess.attr('style', 'display:none');
    $$divError.attr('style', 'display:none');
    $$divSuccessMessage.removeAttr('style');
    $$spanSuccessMessage.text(messageText);
    __IsConfirmlink = false;
    MessageFadeOut(2000);

    return false;
};

var DisableMessage = function () {
    $$divSucess.attr('style', 'display:none');
    $$divSuccessMessage.attr('style', 'display:none');
    $$divError.attr('style', 'display:none');
    return false;
};

var MessageFadeOut = function (xTime) {
    setTimeout(function () {
        $$divSucess.fadeOut('slow');
        $('#divSuccessMessage').fadeOut('slow');
    }, xTime);
};

var newTabLink = function (ev) {
    var $$thisValue = $(ev.currentTarget);
    var newId = $$thisValue.attr('id');
    var linkhref = $$thisValue.attr('href');
    if (linkhref != "javascript:void(0);" && linkhref != "#" && __IsConfirmlink == true) {
        if (newId != 'aSave') {
            if (!$('form').data('changed')) {
                var atag = '<a id="' + Message.GetMenuCookieId() + '"></a>';
                if (window.location.pathname.toLowerCase() == '/employeeprofile/hrdashboard') {
                    atag = '<a id="' + MenuDashboardID + '"></a>'
                    Message.SetMenuCookieId($(atag));
                    Message.SetMenuId($(atag));
                    Message.SetParentMenuCookieId($('<a relparentid="' + MenuDashboardID + '"></a>'));
                }
                Message.SetMenuId($(atag));
                LoadClickedDetail();
            }
        }
    }

}

var LoadClickedDetail = function () {
    //var paragraphtext = $('#data').text();
    //var htmlObject = $(paragraphtext);
    //$('#data').remove();
    //$('#MainUl').append(htmlObject);
    /*
    var parentId = Message.GetParentMenuCookieId();
    var atag = $('#MainUl li a').filter(function () {
        var intParent = $(this).attr('relparentid');
        if (parentId == intParent) {
            return $(this)
        }
    });
    if (atag.length > 0) {
        $(atag).css({ 'background-color': 'rgb(13, 98, 174)', 'color': 'white' }).parent('li').addClass('open active');
    }*/
    Message.GetSearchText();
    var idMenuId = Message.GetMenuCookieId();
    var detailMenu = $.grep(__jsonMenu, function (element) {
        return element.MenuId == idMenuId;
    }
    );

    if (detailMenu.length > 0) {
        $('#divTitle').text(detailMenu[0].MenuForPerticularLanguage);
    }
    var aaatag = '<a id="' + idMenuId + '"></a>';
    Message.SetMenuId($(aaatag));

}
//$(document).on('mouseover', '#txtSearch', function () {  
//    if ($('#sidebar').hasClass('menu-compact')) {
//        $('#sidebar-collapse').removeClass('active');
//        $('#sidebar').removeClass('menu-compact');
//    }
//});


$(document).on('click', 'div#sidebar-collapse', function () {
    Addtitle($(this).hasClass('active'));
});

//$(document).on('mouseover', 'li.liclick', function () {
//    if ($('#sidebar').hasClass('menu-compact')) {
//        $('#sidebar-collapse').removeClass('active');
//        $('#sidebar').removeClass('menu-compact');
//    }
//});

function Addtitle(hasTrue) {
    $('ul#MainUl>li').each(function () {
        var atag = $(this).find('a:first');
        var spanHeading = hasTrue ? atag.find('span').text() : '';
        hasTrue ? $(this).addClass('liclick') : $(this).removeClass('liclick');
        atag.attr('title', spanHeading);
        //console.log(spanHeading);
    });
}

var BedCrumb = function () {
    /*
    var aid = Message.GetMenuId();
    aid = aid == undefined ? 0 : parseInt(aid);
    aid = ~~aid;
    if (aid == 0) {
        aid = Message.GetMenuCookieId();
        aid = aid == undefined ? 0 : parseInt(aid);
        aid = ~~aid;
        isCookieExists = true;
    }
    if (aid > 0) {
        var $$aaTag = $('a#' + aid);
        var ahref = $$aaTag.attr('href');

        if (ahref.indexOf('javascript') == -1 && ahref != '#') {
            if ($$aaTag.hasClass('parentMenu')) {
                $$aaTag.parent('li').addClass('open');
            }
        }


        var submenu = $$aaTag.parent('li').parents('ul.submenu');
        submenu = submenu.get().reverse();
        var list = '';

        $(submenu).each(function () {
            $(this).parent('li').addClass('open');
            list += $(this).parent('li').find('span:first').text() + ' / ';
        });
        list += $$aaTag.find('span').html();
        var menuLength = submenu.length;
        if (menuLength > 1) {
            submenu.pop();
        }
        var mainMenu = $(submenu[0]).siblings('a');
        mainMenu.css({ 'background-color': '#0d62ae', 'color': 'white' });
        mainMenu.parent('li').addClass('open')

        $$aaTag.css({ 'background-color': '#0d62ae', 'color': 'white' });
        $$aaTag.parent('li').addClass('active');


        list = $.trim(list);
        $('#h1Heading').html(list);
        //$('#h1Title').text(list);
        //$('#BreadCrumbs').children('a').html(list).css('color', '#737272');
        var myScrollPos = $('.active').offset().top + $('.active').outerWidth(true) / 2 + $('.scrollbar').scrollTop() - $('.scrollbar').width();
        $('.scrollbar').scrollTop(myScrollPos);
      
    }*/
}
$(document).on('click', '.btnQuick', function () {
    Message.SetMenuCookieId($(this));
    Message.SetMenuId($(this));
    Message.SetParentMenuCookieId($(this));
});
$(document).on('mousedown', '.bedCrumb', function () {
    //if (event.which == 3 || event.which == 1) {
    if (event.which == 1) {
        Message.SetMenuCookieId($(this));
        Message.SetMenuId($(this));
    }
});


//$(document).on('mousedown')
//$(document).on('mousedown','.bedCrumb',function (event) {
//    switch (event.which) {
//        case 1:
//            alert('Left Mouse button pressed.');
//            break;
//        case 2:,,
//            alert('Middle Mouse button pressed.');
//            break;
//        case 3:
//            alert('Right Mouse button pressed.');
//            break;
//        default:
//            alert('You have a strange Mouse!');
//    }
//});


//window.onbeforeunload = function () { 
//    setCookie('LangId', 0, -1);
//    //deleteCookie('Times');
//},


var Message = function () {
    var urlDefaultMessage = "/Common/GetErrorMessageDetail",
        urlLatestDate = "/Common/GetLatestDate",
        urlMessageDetail = "/Common/GetMessageDetailsByIds",
        urlgetHelpText = "/Common/GetMenuHelpText",
        urlGetMenuDetail = "/Common/GetMenuDetail";
    var MessageDetail, MessageId, LanguageId, setLanguageId, dtLocDate, MenuDetail;

    function setCookie(name, value, minutes) {
        var expires;
        if (minutes) {
            var date = new Date();
            // for Days
            //date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
            //for Minutes
            date.setTime(date.getTime() + (minutes * 60 * 1000));
            expires = "; expires=" + date.toGMTString();
            //$.cookie(name, value, { expires: days, path: '/' });
        }
        else {
            expires = "";
        }
        //$.cookie('the_cookie', 'the_value', { expires: 7, path: '/' });
        //$.cookie = name + "=" + value + expires + "; path=/";
        document.cookie = name + "=" + value + expires + "; path=/";
    }


    function getUrlVars() {
        var vars = [], hash;
        var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
        for (var i = 0; i < hashes.length; i++) {
            hash = hashes[i].split('=');
            vars.push(hash[0]);
            vars[hash[0]] = hash[1];
        }
        return vars;
    }

    function getCookie(name) {
        var value = "; " + document.cookie;
        var parts = value.split("; " + name + "=");
        if (parts.length == 2) return parts.pop().split(";").shift();
    }

    function SetDefaultMessage() {
        localStorage.removeItem('MessageDetail');
        localStorage.removeItem('MenuDetail');
        //{ messageId: messageID },

        $.ajax({
            url: urlDefaultMessage,
            async: false,
            type: "post",
            success: function (result) {
                MessageDetail = result;
                var jsonString = JSON.stringify(MessageDetail)
                //setCookie('MessageDetail', jsonString, 30)
                localStorage.setItem('MessageDetail', jsonString);
            },
            error: function (xhr, status, error) {
                var statusCOde = status;
                if (statusCOde == 401 || statusCOde=='error') {
                    window.location.href = window.location.origin + '/Account/Login';
                }
                
            }
        });

        $.ajax({
            url: urlGetMenuDetail,
            async: false,
            type: "post",
            success: function (result) {
                var jsonString = JSON.stringify(result)
                //setCookie('MessageDetail', jsonString, 30)
                localStorage.setItem('MenuDetail', jsonString);
            },
            error: function (xhr, status, error) {
                var statusCOde = status;
                if (statusCOde == 401 || statusCOde== 'error') {
                    window.location.href = window.location.origin + '/Account/Login';
                }
            }
        });


        //$.post(urlDefaultMessage, function (result) {
        //    MessageDetail = result;
        //    var jsonString = JSON.stringify(MessageDetail)
        //    //setCookie('MessageDetail', jsonString, 30)
        //    localStorage.setItem('MessageDetail', jsonString);
        //}).fail(function (data, status) {
        //    var statusCOde = data.status;
        //    if (statusCOde == 401) {
        //        window.location.href = window.location.origin + '/Account/Login';
        //    }

        //});;
    }

    function GetpromiseData() {
        //return new Promise(function (resolve, reject) {
        var deffered = $.Deferred();
        var jsonString;;
        $.ajax({
            url: urlGetMenuDetail,
            async: true,
            type: "post"
            , success: function (result) {
                deffered.resolve(JSON.stringify(result));
                //jsonString= JSON.stringify(result)
                ////setCookie('MessageDetail', jsonString, 30)
                //localStorage.setItem('MenuDetail', jsonString);
            },
            // error: function (xhr, status, error) {
            //     var statusCOde = status;
            //     if (statusCOde == 401) {
            //         window.location.href = window.location.origin + '/Account/Login';
            //     }
            // }
        });


        return deffered.promise();

        //$.post(urlGetMenuDetail).then(function (result) {
        //    console.log(result);
        //}) 

        //console.log('hi');

    }


    function SetLatestDate(languageId) {
        var dtlatestDate = '';
        localStorage.removeItem('locDate');
        $.ajax({
            url: urlLatestDate,
            async: false,
            data: { LanguageId: languageId },
            type: "post",
            success: function (result) {
                dtlatestDate = JSON.stringify(result);
                localStorage.setItem('locDate', dtlatestDate);
            },
            error: function (xhr, status, error) {
                //alert(xhr.responseText);
                //alert("error : " + xhr.responseText);
            }
        });

        return dtlatestDate;
    };

    function GetDataDetails(url, param, type) {
        var dataDetail;
        if (typeof (param) === 'undefined') param = {};
        if (typeof (type) === 'undefined') type = "get";
        $.ajax({
            async: false,
            url: url,
            data: param,
            type: type,
            success: function (data) {
                dataDetail = data
            },
            error: function (xhr, status, error) {
                // alert(xhr.responseText);
                //alert("error 1: " + xhr.responseText);
            }
        });
        return dataDetail;
    };

    function IsUrlExists(urlPath) {
        if (urlPath != '') {
            var http = jQuery.ajax({
                type: "HEAD",
                url: urlPath,
                async: false
            })
            return http.status;
        }
        else {
            return 404;
        }

    }

    function GetDefaultUrl(url, urlId) {
        if (typeof (urlId) === 'undefined') urlId = 1;
        var _url = '';
        if (IsUrlExists(url) == 200) {
            _url = url;
        }
        else {
            _url = GetUrlById(urlId);
        }
        return _url;
    };

    function GetUrlById(Id) {
        var url = '/img/avatars/avtarimg.jpg'
        switch (Id) {
            case 1:
                url = '/img/avatars/avtarimg.jpg';
                break;
            case 2:
                url = '/img/companylogo.png';
                break;

        }
        return url;
    }

    return {
        SetMessgaeDetails: function (languageId, messageId) {

            this.MessageId = messageId;
            this.LanguageId = languageId;
            this.setLanguageId = getCookie('LangId');
            var cokiemessageId = getCookie('MsgId');
            this.dtLocDate = localStorage.getItem('locDate')
            this.dtLocDate = this.dtLocDate == undefined ? '' : this.dtLocDate;
            var dtGetDate = SetLatestDate(languageId);
            if (cokiemessageId != messageId) {
                localStorage.removeItem('MessageDetail');
                localStorage.removeItem('MenuDetail');
            }
            if (this.dtLocDate == '' || this.dtLocDate != dtGetDate ||
                (this.setLanguageId != languageId) || this.setLanguageId == undefined) {
                setCookie('LangId', this.LanguageId, 360);

                //SetDefaultMessage(this.MessageId);
                SetDefaultMessage();

            }
            setCookie('MsgId', this.MessageId, 360);
            //$.cookie('LangId', this.LanguageId);
            //return false;
        },
        GetDefaultMessage: function () {
            this.setLanguageId = getCookie('LangId');
            var messageDetail = localStorage.getItem('MessageDetail');
            messageDetail = messageDetail == null ? '[]' : messageDetail;
            if ((this.LanguageId != this.setLanguageId && this.LanguageId != undefined) || messageDetail == '[]') {
                //SetDefaultMessage(this.MessageId);
                SetDefaultMessage();
                //var ff= $.grep(MessageDetail, function (details)
                // {
                //     return details.ErrorId ==1;
                // });
                //window.location.href = window.location.href;//result.Url 
            }
            //return false;
        },
        GetLatestDate: function (LanguageId) {
            SetLatestDate(LanguageId);
        },
        SetMenuId: function ($$this) {
            var Id = $$this.attr('id');
            $('#hdnClickMenuId').val(Id);
        },
        GetMenuId: function () {
            var menuId = $('#hdnClickMenuId').val();
            return menuId;
            //return getCookie('MenuId')
        }
        ,
        SetFullScreenId: function () {
            var Id = $('#fullscreen-toggler').hasClass('active');
            setCookie('FullScreen', Id, 20);

        },
        GetFullScreenId: function () {
            return getCookie('FullScreen');
            //return getCookie('MenuId')
        },
        SetMenuCookieId: function ($$this) {
            var Id = $$this.attr('id');
            setCookie('MenuId', Id, 360);
        },
        SetParentMenuCookieId: function ($$this) {
            var Id = $$this.attr('relparentid');
            setCookie('ParentID', Id, 360);
        },
        GetMenuCookieId: function () {
            return getCookie('MenuId');
        },
        GetParentMenuCookieId: function () {
            return getCookie('ParentID');
        },
        LoadDataByAjax: function (ajaxUrl, param, ajaxtype) {
            return GetDataDetails(ajaxUrl, param, ajaxtype)
        },
        GetPageMode: function () {
            var pageMode = $('#hdnPageMode').val();
            return pageMode;
            //return getCookie('MenuId')
        },
        SetPageTitle: function (pageTitle) {
            $('#hdnTitle').val(pageTitle);
        },
        SetPageHeader: function (pageheader) {
            $('#h1Heading').html(pageheader);
        },
        SetFullScreenOnPage: function () {
            var value = Message.GetFullScreenId();
            var element = document.documentElement;
            if (value == 'true') {
                $('#fullscreen-toggler').addClass('active');
                $('body').addClass('full-screen');

                //if (element.requestFullscreen) {
                //element.requestFullscreen();
                //} else if (element.mozRequestFullScreen) {
                //element.mozRequestFullScreen();
                //} else if (element.webkitRequestFullscreen) {
                //element.webkitRequestFullscreen();
                //} else if (element.msRequestFullscreen) {
                //element.msRequestFullscreen();
                //}
            }
            else {
                $('#fullscreen-toggler').removeClass('active');
                $('body').removeClass('full-screen');
                //if (document.exitFullscreen) {
                //document.exitFullscreen();
                //} else if (document.mozCancelFullScreen) {
                //document.mozCancelFullScreen();
                //} else if (document.webkitExitFullscreen) {
                //document.webkitExitFullscreen();
                //}
            }
            $('#fullscreen-toggler').trigger('click');

        },
        LoadDocumentLink: function (urlLink, langID) {
            var ulink = urlLink + Message.GetMenuId();
            ulink += "&LangId=" + langID;
            $('#aDocument').attr('href', ulink);
        },
        GetDefaultImageUrl: function (url, urlId) {
            if (urlId === undefined) {
                urlId = 1;
            }
            return GetDefaultUrl(url, urlId);

        },
        SetSearchText: function () {
            var strSearchText = $('#myInput').val();
            strSearchText = encodeURI(strSearchText);
            setCookie('MenuSearch', strSearchText, 10);
        },
        GetSearchText: function () {
            var strSearchText = getCookie('MenuSearch');
            strSearchText = decodeURI(strSearchText);
            strSearchText = strSearchText === "undefined" ? "" : strSearchText;
            $('#myInput').val(strSearchText);
            setCookie('MenuSearch', "", 10);
            return strSearchText;
        },
        GetMessageDetails: function (MessageId) {
            var valueDetail = GetDataDetails(urlMessageDetail, { MessageId: MessageId }, 'post');
            return valueDetail;
        },
        GetQueryStringValue: function (KeyName) {
            return getUrlVars()[KeyName];
        },
        BindHelpText: function () {
            var valueDetail = GetDataDetails(urlgetHelpText, { MenuId: Message.GetMenuId() }, 'post');
            $('#divHelpText').html(valueDetail);

        },
        GetLanguageId: function () {
            return getCookie('LangId');
            //return getCookie('MenuId')
        },
        SetCookie: function (cookieName,value,expireTime) { 
            setCookie(cookieName, value, expireTime);
        }


    };

}();

var isClicked = false;
$(document).on('click', 'label.listCompany', function () {
    //alert();
    if (!isClicked) {
        var result = Message.LoadDataByAjax('/Account/UpdateLastLogin', { CompanyId: $(this).attr('ref') }, 'post')
        Message.SetCookie('LangId',"", -1);
        window.location.reload();
        isClicked = true;
    }
});



//const toast = document.querySelector(".toastSucces");
//const toastError = document.querySelector(".toastError");
//$(document).on("click", '.closebtn', () => {
//    toast.classList.remove("active");
//    toastError.classList.remove("active");
//    setTimeout(() => {
//        $(".progress").removeClass("active");
//    }, 3000);

//    clearTimeout(timer1);
//    clearTimeout(timer2);
//});
//function ShowSuccess(message) {
//    toast.classList.add("active");
//    $(".progress").addClass("active");

//    timer1 = setTimeout(() => {
//        toast.classList.remove("active");
//    }, 5000); //1s = 1000 milliseconds

//    timer2 = setTimeout(() => {
//        $(".progress").removeClass("active");
//    }, 5300);

//}

//function ShowError(message) {
//    toastError.classList.add("active");
//    $(".progress").addClass("active");
//    $('#spanError').text(message);
//}
